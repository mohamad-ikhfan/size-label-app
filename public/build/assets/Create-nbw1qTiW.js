import{W as k,r as S,j as e}from"./app-BPfiMoID.js";import{I as c}from"./InputError-BUB9jcMo.js";import{I as m}from"./InputLabel-DcD9WwI1.js";import{P as C}from"./PrimaryButton-Bs1MwrJz.js";import{S as I}from"./SecondaryButton-BMEX_pKc.js";import{S as h}from"./SelectInput-oGijC9Em.js";import{T as x}from"./TextInput-c7cC8ozs.js";import{n as _}from"./index-CGpWB5Bp.js";function P({user:j,materials:v,closeModal:d=()=>{}}){const{data:u,setData:r,post:g,errors:n,processing:p}=k({date:"",type:"",materials:[],transaction_by:j.id}),[i,o]=S.useState([{material_id:"",qty:""}]),f=(a,s)=>{const t=[...i];t[s].material_id=a,o(t),r("materials",t)},y=(a,s)=>{const t=[...i];t[s].qty=a,o(t),r("materials",t)},N=()=>{const a=[...i];a.push({material_id:"",qty:""}),o(a),r("materials",a)},w=a=>{const s=[...i];s.length>1&&(s.splice(a,1),o(s),r("materials",s),console.log(a),console.log(s))},b=a=>{a.preventDefault(),g(route("transaction-material.store"),{onSuccess:()=>{d(),_.success("New transaction material created successfully.",{position:"top-right",duration:3e3})}})};return e.jsxs("div",{className:"w-full bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"mb-4 text-lg dark:text-gray-100",children:"New Transaction Material"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"date",value:"Date"}),e.jsx(x,{id:"date",className:"mt-1 block w-full",value:u.date,required:!0,onChange:a=>r("date",a.target.value),type:"date",onKeyDown:a=>a.preventDefault()}),e.jsx(c,{className:"mt-2",message:n.date})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"type",value:"Type"}),e.jsxs(h,{id:"type",className:"mt-1 block w-full",value:u.type,required:!0,onChange:a=>r("type",a.target.value),children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"taking",children:"Taking"}),e.jsx("option",{value:"comming",children:"Comming"}),e.jsx("option",{value:"stock_opname",children:"Stock Opname"})]}),e.jsx(c,{className:"mt-2",message:n.type})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-sm",children:"Materials"}),i.map(({material_id:a,qty:s},t)=>e.jsxs("div",{className:"px-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("span",{className:"p-2 text-red-600 text-sm cursor-pointer font-bold",title:"remove",onClick:()=>w(t),children:"X"})}),e.jsxs("div",{className:"w-full flex gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(m,{htmlFor:"material_id_"+t,value:"Material"}),e.jsxs(h,{id:"material_id_"+t,className:"mt-1 block w-full",value:a,required:!0,onChange:l=>f(l.target.value,t),children:[e.jsx("option",{value:"",children:"Select material"}),v.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx(c,{className:"mt-2",message:n.materials})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(m,{htmlFor:"qty_"+t,value:"Qty"}),e.jsx(x,{id:"qty_"+t,type:"number",className:"mt-1 block w-full",required:!0,min:"1",value:s,onChange:l=>y(l.target.value,t)}),e.jsx(c,{className:"mt-2",message:n.materials})]})]})]},t)),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx("span",{className:"py-1 px-2 rounded-md bg-green-700 text-gray-50 text-sm cursor-pointer",onClick:()=>N(),children:"Add Material"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{disabled:p,children:"Save"}),e.jsx(I,{disabled:p,onClick:d,children:"Cancel"})]})]})]})}export{P as default};
